{
    "asyncapi": "2.5.0",
    "info": {
        "title": "Trips Streaming API",
        "version": "1.0.0",
        "description": "This API exposes all events related to `Trip` entity"
    },
    "servers": {
        "test": {
            "connectionString": "pkc-zpjg0.eu-central-1.aws.confluent.cloud:9092",
            "description": "Confluent Cloud bootstrap servers",
            "protocol": "kafka",
            "protocolVersion": "latest",
            "bindings": {
                "kafka": {
                    "schemaRegistryUrl": "https://psrc-95km5.eu-central-1.aws.confluent.cloud",
                    "schemaRegistryVendor": "confluent"
                }
            }
        }
    },
    "defaultContentType": "avro/binary",
    "channels": {
        "trips": {
            "description": "Topic that collects all trips",
            "subscribe": {
                "operationId": "readTrips",
                "security": [
                    {
                        "apiKey": []
                    }
                ],
                "message": {
                    "messageId": "trips-value",
                    "contentType": "avro/binary",
                    "schemaFormat": "application/vnd.apache.avro",
                    "payload": {
                        "$ref": "./infra/terraform/modules/schema/trips.avsc#/trips"
                    },
                    "bindings": {
                        "kafka": {
                            "schemaIdPayloadEncoding": "confluent",
                            "schemaLookupStrategy": "TopicIdStrategy",
                            "key": {
                                "type": "string",
                                "enum": ["id"]
                            }
                        }
                    }
                }
            }
        }
    },
    "components": {
        "securitySchemes": {
            "apiKey": {
                "type": "apiKey",
                "in": "user"
            }
        }
    }
}